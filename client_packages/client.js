!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var r=s(i(1)),n=s(i(5));let a=new(0,r.default),o=new(0,n.default);mp.events.add("client:race:init",e=>{a.init(e)}),mp.events.add("client:race:endRace",()=>{a.endRace()}),mp.events.add("render",()=>{a.isWait()&&o.show(`СТАРТ ЧЕРЕЗ: ${a.isTimeBar().time}`,.5,.5,1,255,255,255,180,1,1,!1,!1)}),mp.events.add("playerEnterColshape",e=>{e===a.isGetRaceShape()&&(a.setKeyRace(),28===e.prop&&a.getBestTimeCircle(),a.endRace(),a.startRace())}),mp.events.add("entityStreamIn",e=>{a.entityStreamIn(e)})},function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=s(i(2)),n=s(i(3)),a=s(i(4));let o=new(0,r.default),c=new(0,n.default),l=new(0,a.default);t.default=class{constructor(){this.config={},this.timebarInterval=null,this.timebar={time:0},this.raceStart=!1,this.raceWait=!1,this.keyRace=1,this.startTime=null,this.endTime=null,this.bestTime=null,this.lastCheckpoint=29,this.keyCricle=1,this.coldCircle=!1,this.hotCircle=!1}init(e){e=JSON.parse(e),this.config=e}startWait(){this.isFreezePosition(!0),this.startTimeBar(!0,!0,15),this.raceWait=!0}isTimeBar(){return this.timebar}isWait(){return this.raceWait}isFreezePosition(e){mp.players.local.vehicle&&mp.players.local.vehicle.freezePosition(e)}startTimeBar(e,t,i){let s=i;e?(null!==this.timebarInterval&&clearInterval(this.timebarInterval),this.timebarInterval=setInterval(()=>{(i<0||void 0===i)&&(i=s),i-=1,this.timebar.time=`${i}`,0===i&&(clearInterval(this.timebarInterval),this.timebarInterval=null,t&&this.startRace())},1e3)):(clearInterval(this.timebarInterval),this.timebarInterval=null,void 0!==i&&(this.timebar.time="0"))}startRace(){if(this.isFreezePosition(!1),1===this.keyCricle?this.coldCircle=!0:this.hotCircle=!0,this.raceWait&&(this.raceWait=!1),null===this.startTime&&(this.startTime=(new Date).getTime()),this.keyRace===this.lastCheckpoint&&(this.keyRace=1),!this.raceStart){for(let e in this.config.checkpoints)this.config.checkpoints[e].key===this.keyRace&&(o.create(1,new mp.Vector3(this.config.checkpoints[e].position.x,this.config.checkpoints[e].position.y,this.config.checkpoints[e].position.z),`Чекпоинт #${this.keyRace}`,mp.players.local.dimension),c.create(1,new mp.Vector3(this.config.checkpoints[e].position.x,this.config.checkpoints[e].position.y,this.config.checkpoints[e].position.z),5,mp.players.local.dimension),c.createSprite(this.config.checkpoints[e].sprite,new mp.Vector3(this.config.checkpoints[e].position.x,this.config.checkpoints[e].position.y,this.config.checkpoints[e].position.z+2),new mp.Vector3(0,0,this.config.checkpoints[e].position.z),new mp.Vector3(0,0,0),2,mp.players.local.dimension),l.create(this.keyRace,this.config.checkpoints[e].position.x,this.config.checkpoints[e].position.y,this.config.checkpoints[e].position.z,5,mp.players.local.dimension));this.raceStart=!0}}getBestTimeCircle(){this.endTime=(new Date).getTime(),this.bestTime=this.endTime-this.startTime;let e=this.bestTime/1e3,t=parseInt(e/3600);e%=3600;let i=parseInt(e/60),s=(t=t<10?"0"+t:t)+":"+(i=i<10?"0"+i:i)+":"+(e=(e%=60)<10?"0"+e.toFixed():e.toFixed());this.coldCircle?(mp.events.callRemote("server:race:bestTime",s,!0),this.coldCircle=!1):mp.events.callRemote("server:race:bestTime",s,!1),this.startTime=null,this.endTime=null,this.bestTime=null,this.keyCricle++}setKeyRace(){this.keyRace++}isGetRaceShape(){return l.isGetShape()}endRace(){this.raceWait&&(this.raceWait=!1),this.raceStart&&(this.raceStart=!1),null!==this.timebarInterval&&this.startTimeBar(!1,!1,0),this.coldCircle=!1,this.hotCircle=!1,o.delete(),c.delete(),l.delete()}entityStreamIn(e){"vehicle"===e.type&&(mp.players.local.taskEnterVehicle(e.handle,5e3,-1,1,1,0),setTimeout(()=>{this.startWait()},6e3))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.blip=null}create(e,t,i,s){this.blip=mp.blips.new(e,t,{name:i,scale:1,color:29,alpha:[255],drawDistance:!1,shortRange:!1,dimension:s}),this.blip.setRoute(!0)}delete(){null!==this.blip&&(this.blip.setRoute(!1),this.blip.destroy(),this.blip=null)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.marker=null,this.sprite=null}create(e,t,i,s){this.marker=mp.markers.new(e,t,i,{color:[0,0,255,100],dimension:s})}createSprite(e,t,i,s,r,n){this.sprite=mp.markers.new(e,t,r,{direction:i,rotation:s,color:[255,255,255,100],dimension:n})}delete(){null!==this.marker&&(this.marker.destroy(),this.marker=null),null!==this.sprite&&(this.sprite.destroy(),this.sprite=null)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.shape=null}create(e,t,i,s,r,n){this.shape=mp.colshapes.newSphere(t,i,s,r,n),this.shape.prop=e}isGetShape(){return this.shape}delete(e){null!==this.shape&&(this.shape.destroy(),this.shape=null)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){}show(e,t,i,s,r,n,a,o,c,l,h,p){switch(mp.game.ui.setTextFont(c),mp.game.ui.setTextScale(1,s),mp.game.ui.setTextColour(r,n,a,o),h&&mp.game.invoke("0x1CA3E9EAC9D93E5E"),p&&mp.game.invoke("0x2513DFB0FB8400FE"),l){case 1:mp.game.ui.setTextCentre(!0);break;case 2:mp.game.ui.setTextRightJustify(!0),mp.game.ui.setTextWrap(0,t)}mp.game.ui.setTextEntry("STRING"),mp.game.ui.addTextComponentSubstringPlayerName(e),mp.game.ui.drawText(t,i)}}}]);